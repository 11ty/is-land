<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<title></title>
		<link rel="stylesheet" href="demo-styles.css">

		<script type="module">
		import "/islands.js";
		import "/vanilla-web-component.js"; // eager, probably not typical

		// https://github.com/lit/lit/tree/main/packages/labs/eleventy-plugin-lit#example-bootup-strategy
		// This file is used to hydrate server rendered lit components
		import "/lib/lit/experimental-hydrate-support.js";
		</script>
	</head>
	<body>
		<h1><a href="/demo.html">is-land</a> using Lit</h1>

		<h2>Standalone</h2>

		<p>This is a control to make sure the component initializes as expected without an island.</p>

		<vanilla-web-component class="demo-component">Vanilla Web Component</vanilla-web-component>

		<h2>Scroll down</h2>

		<hr style="height: 100vh">

		<h2>Client-rendered Lit</h2>

		<p>You can use `import="./lit-component.js"` or `&lt;import type="module/island"&gt;`:</p>

		<is-land on:visible import="./lib/lit/lit-component-client.js">
			This is a lit component:
			<lit-component-client class="demo-component" name="World">Fallback content!</lit-web-component>
		</is-land>

		<is-land on:visible id="lit-test">
			This is a lit component: <lit-other-web-component class="demo-component" name="World">Fallback content!</lit-other-web-component>

			<script type="module/island">
			import {html, css, LitElement} from "https://cdn.jsdelivr.net/gh/lit/dist@2/core/lit-core.min.js";

			customElements.define('lit-other-web-component', class extends LitElement {
				// encapsulated styles!
				static styles = css`p { color: blue; margin: 0; }`;
			
				static properties = {
					name: {type: String},
				};

				render() {
					this.classList.add("test-c-finish");
					return html`<p>Hello, ${this.name || "Stranger"}!</p>`;
				}
			});
			</script>
		</is-land>

		<h2>Server-rendered Lit (SSR)</h2>
		<p>
			A few notes on the Lit implementation:
			1. The <a href="https://github.com/lit/lit/blob/main/packages/lit-element/src/experimental-hydrate-support.ts"><code>experimental-hydrate-support.js</code></a> file is needed to be loaded up front (the library canâ€™t be lazy loaded, though the component initialization can). Hoping this improves.
			2. Full <a href="https://caniuse.com/declarative-shadow-dom">Declarative Shadow DOM support</a> is required to show any fallback content without JS.
		</p>
		<is-land on:visible import="/lib/lit/lit-component.js">
			<lit-component name="World"></lit-component>
		</is-land>
	</body>
</html>