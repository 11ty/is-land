<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<title></title>
		<link rel="stylesheet" href="demo-styles.css">

		<script type="importmap">
		{
			"imports": {
				"@11ty/island": "/islands.js",
				
				// Vue
				"petite-vue": "https://unpkg.com/petite-vue@0.4.1/dist/petite-vue.es.js",
				"vue": "https://unpkg.com/vue@3.2.36/dist/vue.esm-browser.prod.js" // remove .prod to use dev version

			}
		}
		</script>
		<script type="module">
		import "@11ty/island";

		// You can directly import dependencies (for eager loading)
		// or for lazy loaded islands put dependencies into `dependency="./vanilla-web-component"`
		import "./vanilla-web-component.js";
		</script>
	</head>
	<body>
		<h1><a href="/demo.html">is-land</a></h1>

		<p>A framework independent partial hydration islands architecture implementation using web components.</p>
		<p>Features:</p>

		<ul>
			<li>Easy to add to existing components</li>
			<li>Zero dependencies by default</li>
			<li>Small footprint</li>
			<li>Not tightly coupled to a server framework or site generator tool.</li>
			<li>Examples using Web Components, Vue, and <code>petite-vue</code> (shown below). See also: <a href="demo-lit.html">Lit</a></li>
		</ul>

		<h2>Standalone</h2>

		<p>This is a control to make sure the component initializes as expected without an island.</p>

		<vanilla-web-component>Vanilla web component</vanilla-web-component>

		<h2>Defaults</h2>

		<p>These islands are eagerly loaded and initialized.</p>

		<is-land>
			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<is-land type="petite-vue" v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>

		<is-land type="petite-vue">
			<div id="petite-vue-app">
				Petite Vue (using an inline script for extra init code):
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</div>

			<script type="module" init>
			import { createApp } from "petite-vue";
			createApp({
				count: 0,
			}).mount("#petite-vue-app")
			</script>
		</is-land>

		<hr style="height: 100vh">

		<h2><code>on:visible</code></h2>
		<is-land on:visible>
			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<is-land type="petite-vue" on:visible v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>

		<is-land type="petite-vue" on:visible>    
			<div id="petite-vue-app-visible">
				Petite Vue (using an inline script for extra init code):
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</div>

			<script type="module" init>
				import { ready } from "@11ty/island";

				let app = document.getElementById("petite-vue-app-visible");
				let { createApp } = await ready(app);

				createApp({
					count: 0,
				}).mount(app)
			</script>
		</is-land>

		<p>This is the first full Vue component (and it is off-viewport) so the library code is also lazy loaded. You can swap this behavior and eagerly load the library code by adding <code>loading="eager"</code> on any individual island.</p>

		<is-land type="vue" on:visible>
			<div id="vue-app">
				Vue (using an inline script for extra init code):
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</div>

			<script type="module" init>
				import { ready } from "@11ty/island";
				let app = document.getElementById("vue-app");
				let { createApp } = await ready(app);
			
				createApp({
					data() {
						return { count: 0 };
					}
				}).mount(app)
			</script>
		</is-land>

		<h2><code>on:visible</code> group</h2>

		<p>Parent island has <code>on:visible</code> but none of the child components have an explicit loading condition. They will inherit the loading conditions of all of the ancestors.</p>

		<is-land on:visible>
			<vanilla-web-component>Vanilla web component</vanilla-web-component>

			<is-land type="petite-vue" v-scope="{ count: 0 }">
				Petite Vue:
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</is-land>
		</is-land>

		<h2><code>on:interaction</code> group</h2>

		<p>Requires one of: touchstart, click, focusin.</p>
		<p>Note here that we used one parent island to group both of these components, and interacting with either initializes the whole group.</p>

		<is-land on:interaction>
			<is-land type="petite-vue" v-scope="{ count: 0 }">
				Petite Vue:
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</is-land>

			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<p>Use <code>on:interaction="mouseenter,focusin"</code> to override/change the event types.</p>
		<is-land on:interaction="mouseenter,focusin">
			<is-land type="petite-vue" v-scope="{ count: 0 }">
				Petite Vue:
				<button @click="count++">⬆️</button>
				<button @click="count--">⬇️</button>
				<span v-html="count">0</span>
			</is-land>

			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<h2><code>on:idle</code></h2>

		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		<is-land type="petite-vue" on:idle v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>

		<h2><code>on:media</code></h2>
		<p><code>on:media="(min-width: 64em)"</code></p>
		<p>This only runs when the viewport is greater than or equal to 1024px wide: <code>on:media="(min-width: 64em)"</code></p>
		<is-land type="petite-vue" on:media="(min-width: 64em)" v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>
		
		<p>This only runs when the viewport is less than 1024px wide: <code>on:media="(max-width: 63.9375em)"</code></p>
		<is-land type="petite-vue" on:media="(max-width: 63.9375em)" v-scope="{ count: 0 }">
			Petite Vue:
			<button @click="count++">⬆️</button>
			<button @click="count--">⬇️</button>
			<span v-html="count">0</span>
		</is-land>

		<p>This runs when the user prefers reduced motion: <code>on:media="(prefers-reduced-motion)"</code></p>

		<is-land on:media="(prefers-reduced-motion)">
			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<h2><code>on:save-data</code></h2>

		<p>This runs when the user has <a href="https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/saveData">Save Data</a> enabled:</p>

		<is-land on:save-data>
			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>

		<p><code>on:save-data="false"</code> This runs when the user does not have <a href="https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/saveData">Save Data</a> enabled:</p>

		<is-land on:save-data="false">
			<vanilla-web-component>Vanilla web component</vanilla-web-component>
		</is-land>
	</body>
</html>